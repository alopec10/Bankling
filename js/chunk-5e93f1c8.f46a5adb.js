(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e93f1c8"],{"2b14":function(t,e,i){},"7c66":function(t,e,i){"use strict";i("2b14")},"8c3f":function(t,e,i){"use strict";i("ee5d")},ce57:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"multiple"}},[i("div",{staticClass:"text-center"},[i("h2",{staticClass:"title",style:t.fontSize},[t._v(" EVOLUCIÓN DE GASTOS POR CATEGORÍA ")])]),i("apexchart",{attrs:{type:"line",height:"320",options:t.chartOptions,series:t.series}})],1)},a=[],o=(i("4160"),i("caad"),i("159b"),i("2909")),r=i("5530"),s=i("1321"),l=i.n(s),c=i("2f62"),u={name:"Multiple",components:{apexchart:l.a},props:{movs:{type:Array,required:!0},initialDate:String,finalDate:String},mounted:function(){this.movements.sort((function(t,e){var i=new Date(t.date),n=new Date(e.date);return i>n?1:i<n?-1:0}))},computed:Object(r["a"])({fontSize:function(){return{fontSize:this.fontSizeTitle+" !important"}},movements:function(){return this.movs.sort((function(t,e){var i=new Date(t.date),n=new Date(e.date);return i>n?1:i<n?-1:0}))},dates:function(){if(void 0===this.movements||0===this.movements.length)return[];var t,e,i=[];for(t=""===this.initialDate||void 0===this.initialDate||null===this.initialDate?new Date(this.movements[0].date):new Date(this.initialDate),e=""===this.finalDate||void 0===this.finalDate||null===this.finalDate?new Date(this.movements[this.movements.length-1].date):new Date(this.finalDate),t;t<=e;t.setDate(t.getDate()+1))i.push(new Date(t).toISOString().substr(0,10));return i.includes(e.toISOString().substr(0,10))||i.push(e.toISOString().substr(0,10)),i},series:function(){var t=this,e=Object(o["a"])(this.dates);if(0===e.length)return[];var i=[{name:"Ocio",data:[]},{name:"Servicios",data:[]},{name:"Compras",data:[]},{name:"Otro",data:[]}],n=0,a=0,r=0,s=0,l=0,c=0;return e.forEach((function(e){i[0].data.push(n),i[1].data.push(a),i[2].data.push(r),i[3].data.push(s);var o,u=new Date(e);o=c<t.movements.length?new Date(t.movements[c].date):new Date(t.movements[t.movements.length-1].date);while(c<t.movements.length&&u.getTime()===o.getTime()){var m=t.movements[c];"Gasto"===m.type&&("Ocio"===m.category?(i[0].data[l]+=m.amount,n+=m.amount):"Servicios"===m.category?(i[1].data[l]+=m.amount,a+=m.amount):"Compras"===m.category?(i[2].data[l]+=m.amount,r+=m.amount):"Otro"===m.category&&(i[3].data[l]+=m.amount,s+=m.amount)),c++,c<t.movements.length&&(o=new Date(t.movements[c].date))}l++})),i},chartOptions:function(){var t={chart:{height:350,type:"line",toolbar:{show:!0},zoom:{enabled:!0}},colors:[this.colOcio,this.colServicios,this.colCompras,this.colOtro],dataLabels:{enabled:!1},stroke:{width:[5,5,5,5],curve:"straight"},legend:{offsetY:7,tooltipHoverFormatter:function(t,e){return t+" - "+e.w.globals.series[e.seriesIndex][e.dataPointIndex]}},markers:{size:0,hover:{sizeOffset:6}},xaxis:{categories:this.dates,type:"datetime"},tooltip:{x:{format:"dd/MM/yy"},y:[{title:{formatter:function(t){return t}}},{title:{formatter:function(t){return t}}},{title:{formatter:function(t){return t}}}]},grid:{borderColor:"#f1f1f1"}};return t}},Object(c["c"])(["colOcio","colServicios","colCompras","colOtro","fontSizeTitle"])),data:function(){return{}}},m=u,f=(i("7c66"),i("2877")),d=Object(f["a"])(m,n,a,!1,null,"46655eef",null);e["a"]=d.exports},e4bb:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{margin:"0px 30px 30px 30px !important"}},[i("v-row",{staticClass:"ml-2 mr-2"},[i("v-col",{attrs:{lg:"4"}},[i("v-text-field",{staticClass:"customText",attrs:{hint:"Introduce la cadena a buscar",label:"Concepto","error-messages":t.conceptErrors},on:{input:function(e){t.$v.concept.$touch(),t.filterConcept()},blur:function(e){return t.$v.concept.$touch()}},model:{value:t.concept,callback:function(e){t.concept=e},expression:"concept"}})],1),i("v-col",{attrs:{lg:"2"}},[i("v-text-field",{staticClass:"customText",attrs:{hint:"Introduce un número no negativo",label:"Importe mínimo",type:"number","error-messages":t.minAmountErrors},on:{input:function(e){return t.filterMinAmount()},blur:function(e){return t.$v.minAmount.$touch()}},model:{value:t.minAmount,callback:function(e){t.minAmount=e},expression:"minAmount"}})],1),i("v-col",{attrs:{lg:"2"}},[i("v-text-field",{staticClass:"customText",attrs:{label:"Importe máximo",type:"number",hint:"Introduce un número no negativo","error-messages":t.maxAmountErrors},on:{input:function(e){return t.filterMaxAmount()},blur:function(e){return t.$v.maxAmount.$touch()}},model:{value:t.maxAmount,callback:function(e){t.maxAmount=e},expression:"maxAmount"}})],1),i("v-col",{attrs:{lg:"4"}},[i("v-select",{staticClass:"customText",attrs:{items:t.combos,label:"Categoría",multiple:""},on:{input:t.filterCategory},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}})],1)],1),i("v-row",{staticClass:"ml-2 mr-2"},[i("v-col",{attrs:{lg:"4"}},[i("v-select",{staticClass:"customText",attrs:{items:t.types,label:"Tipo"},on:{input:t.filterType},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),i("v-col",{attrs:{justify:"center",align:"center",lg:"2"}},[i("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[i("v-text-field",t._g(t._b({staticClass:"customText",attrs:{label:"Fecha de inicio",readonly:""},model:{value:t.initialDate,callback:function(e){t.initialDate=e},expression:"initialDate"}},"v-text-field",a,!1),n))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[i("v-date-picker",{attrs:{landscape:!0},on:{input:t.filterInitialDate},model:{value:t.initialDate,callback:function(e){t.initialDate=e},expression:"initialDate"}})],1)],1),i("v-col",{attrs:{justify:"center",align:"center",lg:"2"}},[i("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[i("v-text-field",t._g(t._b({staticClass:"customText",attrs:{label:"Fecha de fin",readonly:"","error-messages":t.finalDateErrors},model:{value:t.finalDate,callback:function(e){t.finalDate=e},expression:"finalDate"}},"v-text-field",a,!1),n))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[i("v-date-picker",{attrs:{landscape:!0},on:{input:function(e){t.$v.finalDate.$touch(),t.filterFinalDate()},blur:function(e){return t.$v.finalDate.$touch()}},model:{value:t.finalDate,callback:function(e){t.finalDate=e},expression:"finalDate"}})],1)],1),i("v-col",{attrs:{lg:"2"}},[i("div",{staticClass:"text-center"},[i("v-btn",{attrs:{large:"",elevation:"2",color:"primary"},on:{click:t.filter}},[t._v("Filtrar")])],1)]),i("v-col",{attrs:{lg:"2"}},[i("div",{staticClass:"text-center"},[i("v-btn",{attrs:{large:"",elevation:"2",color:"primary"},on:{click:t.clear}},[t._v("Limpiar")])],1)])],1),i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-col",{attrs:{md:"12",lg:"9",xl:"9"}},[i("HistoryTable",{attrs:{movs:t.movs},on:{update:t.update}})],1),i("v-col",{staticStyle:{"margin-left":"0px","flex-direction":"column"},attrs:{md:"12",lg:"3",xl:"3"}},[i("v-card",{staticClass:"elevation-15 text-center",staticStyle:{border:"3px solid #13314a","border-radius":"20px","background-color":"#f2fcff !important","padding-top":"20px"},attrs:{height:"443px"}},[i("Pie",{attrs:{movements:t.movs,link:!0}})],1)],1)],1),i("v-btn",{staticClass:"mb-14",staticStyle:{"font-size":"2em","z-index":"5",border:"3px solid #f2fcff !important"},attrs:{fab:"",dark:"",large:"",color:"primary",fixed:"",right:"",bottom:""},on:{click:function(e){t.dialog=!0}}},[t._v("?")]),i("Help",{attrs:{title:"HISTORIAL"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}})],1)},a=[],o=(i("4de4"),i("caad"),i("2532"),i("498a"),i("2909")),r=i("5530"),s=i("ca2c"),l=i("3225"),c=i("ce57"),u=i("5900"),m=i("e036"),f=i("2f62"),d=i("1dce"),h=i("b5ae"),p={name:"History",components:{Pie:l["a"],HistoryTable:m["a"],Multiple:c["a"],Donut:u["a"],Help:s["a"]},mixins:[d["validationMixin"]],validations:{concept:{maxLength:Object(h["maxLength"])(20)},minAmount:{decimal:function(t){return void 0==t||""===t||!!this.isNumeric(t)},minAmount:function(t){return void 0==t||""===t||t>=.01},twoDecimals:function(t){return void 0==t||""===t||100*t%1==0}},maxAmount:{decimal:function(t){return void 0==t||!!this.isNumeric(t)},minAmount:function(t){return void 0==t||""===t||t>=.01},twoDecimals:function(t){return void 0==t||""===t||100*t%1==0},greater:function(t){return null==this.minAmount||void 0==this.minAmount||""===t||void 0==this.maxAmount||null==this.maxAmount||""==this.maxAmount||t>this.minAmount}},finalDate:{isAfter:function(t){if(""===this.initialDate||null===this.initialDate||""===this.finalDate||null===this.finalDate)return!0;var e=new Date(this.initialDate),i=new Date(t);return i>e}}},computed:Object(r["a"])({conceptErrors:function(){var t=[];return this.$v.concept.$dirty?(!this.$v.concept.maxLength&&t.push("El concepto debe ocupar como máximo 20 caracteres."),t):t},minAmountErrors:function(){var t=[];return this.$v.minAmount.$dirty?(!this.$v.minAmount.decimal&&t.push("El importe debe ser numérico."),!this.$v.minAmount.minAmount&&t.push("El importe debe ser superior a 0€."),!this.$v.minAmount.twoDecimals&&t.push("El importe debe tener como máximo 2 decimales."),t):t},maxAmountErrors:function(){var t=[];return this.$v.maxAmount.$dirty?(!this.$v.maxAmount.decimal&&t.push("El importe debe ser numérico."),!this.$v.maxAmount.minAmount&&t.push("El importe debe ser superior a 0€."),!this.$v.maxAmount.greater&&t.push("El importe debe ser superior al importe mínimo seleccionado"),!this.$v.maxAmount.twoDecimals&&t.push("El importe debe tener como máximo 2 decimales."),t):t},finalDateErrors:function(){var t=[];return this.$v.finalDate.$dirty?(!this.$v.finalDate.isAfter&&t.push("La fecha de fin debe ser posterior a la de inicio."),t):t}},Object(f["c"])(["uniqueMovements"])),created:function(){this.aux=Object(o["a"])(this.uniqueMovements),this.movs=Object(o["a"])(this.uniqueMovements)},data:function(){return{dialog:!1,movs:[],aux:[],menu1:!1,menu:!1,concept:"",category:"",minAmount:void 0,maxAmount:void 0,type:"",initialDate:"",finalDate:"",filters:{concept:"",category:"",minAmount:0,maxAmount:0,type:"",initialDate:"",finalDate:""},combos:["Ocio","Servicios","Compras","Ingresos","Otro"],types:["Ingreso","Gasto"]}},methods:{update:function(){this.movs=Object(o["a"])(this.uniqueMovements)},filter:function(){if(this.$v.$touch(),!this.$v.$invalid){var t=new this.$MultiFilters(this.uniqueMovements,this.filters);Object(o["a"])(this.uniqueMovements);t.registerFilter("concept",(function(t,e){return""===t.trim()?e:e.filter((function(e){return e.concept.toLowerCase().includes(t.toLowerCase())}),t)})),t.registerFilter("category",(function(t,e){return null===t||0===t.length?e:e.filter((function(e){return t.includes(e.category)}),t)})),t.registerFilter("minAmount",(function(t,e){return 0===t||null===t||""===t||isNaN(t)?e:e.filter((function(e){return e.amount>=t}),t)})),t.registerFilter("maxAmount",(function(t,e){return 0===t||null===t||""===t||isNaN(t)?e:e.filter((function(e){return e.amount<=t}),t)})),t.registerFilter("type",(function(t,e){return""===t.trim()?e:e.filter((function(e){return e.type.toLowerCase().includes(t.toLowerCase())}),t)})),t.registerFilter("initialDate",(function(t,e){if(""===t||null===t)return e;var i=new Date(t);return e.filter((function(t){var e=new Date(t.date);return e>=i}),t)})),t.registerFilter("finalDate",(function(t,e){if(""===t||null===t)return e;var i=new Date(t);return e.filter((function(t){var e=new Date(t.date);return e<=i}),t)})),this.movs=t.runFilters()}},filterConcept:function(){this.filters=this.$MultiFilters.updateFilters(this.filters,{concept:this.concept})},filterCategory:function(){this.filters=this.$MultiFilters.updateFilters(this.filters,{category:this.category})},filterMinAmount:function(){this.filters=this.$MultiFilters.updateFilters(this.filters,{minAmount:parseFloat(this.minAmount)})},filterMaxAmount:function(){this.filters=this.$MultiFilters.updateFilters(this.filters,{maxAmount:parseFloat(this.maxAmount)})},filterType:function(){this.filters=this.$MultiFilters.updateFilters(this.filters,{type:this.type})},filterInitialDate:function(){this.menu1=!1,this.filters=this.$MultiFilters.updateFilters(this.filters,{initialDate:this.initialDate})},filterFinalDate:function(){this.menu=!1,this.filters=this.$MultiFilters.updateFilters(this.filters,{finalDate:this.finalDate})},clear:function(){this.$v.$reset(),this.minAmount=void 0,this.maxAmount=void 0,this.concept="",this.category="",this.type="",this.initialDate="",this.finalDate="",this.movs=Object(o["a"])(this.uniqueMovements),this.filters={concept:"",category:"",minAmount:0,maxAmount:0,type:"",initialDate:"",finalDate:""}},isNumeric:function(t){return void 0===t||""===t||!isNaN(t)&&!isNaN(parseFloat(t))}}},v=p,g=(i("8c3f"),i("2877")),x=i("6544"),b=i.n(x),D=i("8336"),y=i("b0af"),A=i("62ad"),$=i("2e4b"),w=i("e449"),C=i("0fd9"),O=i("b974"),F=i("8654"),k=Object(g["a"])(v,n,a,!1,null,"9c90ab6e",null);e["default"]=k.exports;b()(k,{VBtn:D["a"],VCard:y["a"],VCol:A["a"],VDatePicker:$["a"],VMenu:w["a"],VRow:C["a"],VSelect:O["a"],VTextField:F["a"]})},ee5d:function(t,e,i){}}]);
//# sourceMappingURL=chunk-5e93f1c8.f46a5adb.js.map